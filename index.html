<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>1ì°¨ì‹œ | ì‚¬ì§„ ë‚˜ë¼ì˜ ìˆ˜ìƒí•œ ë‹¨ì„œ ì°¾ê¸° : ì§„ì§œì™€ ë‹¤ë¥¸ ì ì„ ì°¾ì•„ìš”</title>
  <style>
    :root{
      /* ë°ì€ í†¤ (ìœ ì•„ìš©) */
      --bg:#fff8e6;            /* warm light */
      --panel:#ffffffee;       /* white panel */
      --muted:#64748b;         /* slate-500 */
      --text:#1f2937;          /* slate-800 */
      --accent:#fbbf24;        /* amber-400 */
      --accent2:#fb923c;       /* orange-400 */
      --good:#16a34a;          /* green-600 */
      --bad:#ef4444;           /* red-500 */
      --ring:#f59e0b;          /* amber-500 */
      --soft:#f8fafc;          /* stage bg */
      --border:#e5e7eb;        /* light border */
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:linear-gradient(180deg,var(--bg),#fff);color:var(--text);font:16px/1.5 system-ui,Segoe UI,Apple SD Gothic Neo,Noto Sans KR,Arial,sans-serif}
    .max{max-width:1100px;margin:0 auto;padding:20px;}
    .card{background:var(--panel);backdrop-filter:blur(8px);border:1px solid var(--border);border-radius:18px;box-shadow:0 8px 24px #00000010}
    .row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
    .grow{flex:1}
    .headline{font-size:clamp(22px,3.2vw,30px);font-weight:900;margin:0}
    .sub{color:var(--muted);font-size:14px}

    /* â–¶ ì „ì²´ ë²„íŠ¼ í¬ê²Œ (ìœ ì•„ìš© í„°ì¹˜) */
    .btn, .ghost{
      appearance:none;border:0;border-radius:18px;padding:10px 18px;   /* ìœ„ì•„ë˜ ì—¬ë°± ì¤„ì„ */
      font-size:18px;font-weight:800;cursor:pointer
    }
header {
  margin-bottom: 16px; /* í—¤ë”ì™€ ë©”ì¸ í™”ë©´ ì‚¬ì´ ê°„ê²© */
}
    .btn{color:#111827;background:linear-gradient(135deg,var(--accent),var(--accent2));box-shadow:0 8px 18px #f59e0b33}
    .ghost{background:#fff;color:var(--text);border:1px solid var(--border)}

    label{font-size:18px}

    .screen{min-height:70vh;padding:22px}
    .grid{display:grid;gap:16px}
    .g-3{grid-template-columns:repeat(3,minmax(0,1fr))}
    .thumb{position:relative;border-radius:16px;overflow:hidden;border:1px solid var(--border);background:#fff}
    .thumb img{width:100%;height:200px;object-fit:cover;display:block}
    .thumb small{display:none}
    .thumb .ghost{position:absolute;right:12px;bottom:12px;padding:14px 18px;font-size:18px}

    .stage{position:relative;border-radius:18px;overflow:hidden;border:1px solid var(--border);background:var(--soft);min-height:380px}
    .stage img{width:100%;display:block}
    .hotspot{position:absolute;border:3px dashed var(--ring);border-radius:999px;transform:translate(-50%,-50%);width:72px;height:72px;pointer-events:none;opacity:0;transition:.25s}
    .hotspot.found{border-color:var(--good);box-shadow:0 0 0 6px #16a34a33}
    .ping{position:absolute;inset:0;border-radius:inherit;border:3px solid transparent;animation:ping 1.1s ease-out 2}
    @keyframes ping{0%{box-shadow:0 0 0 0 #f59e0b55}100%{box-shadow:0 0 0 24px transparent}}

    .toast{position:fixed;left:50%;bottom:26px;transform:translateX(-50%);background:#111827e6;color:#fff;border:1px solid #00000022;padding:12px 16px;border-radius:14px;font-size:16px}
    .confetti{position:fixed;inset:0;pointer-events:none}
    .chip{position:absolute;width:10px;height:10px;border-radius:2px;opacity:0;animation:fall 1.2s ease-out forwards}
    @keyframes fall{0%{transform:translateY(-20px) rotate(0);opacity:1}90%{opacity:1}100%{transform:translateY(120vh) rotate(480deg);opacity:0}}
    .divider{height:1px;background:var(--border);margin:12px 0}
    .kudos{font-weight:900;color:#111827;background:linear-gradient(135deg,#34d399,#fbbf24);-webkit-background-clip:text;background-clip:text;color:transparent}
    footer{margin-top:18px;text-align:center;color:#6b7280;font-size:13px}
  </style>
</head>
<body>
<div class="max">
<header class="row">
<h1 class="headline">1ì°¨ì‹œ | ì‚¬ì§„ ë‚˜ë¼ì˜ ìˆ˜ìƒí•œ ë‹¨ì„œ ì°¾ê¸°: ì§„ì§œì™€ ë‹¤ë¥¸ ì ì„ ì°¾ì•„ìš” </h1>
<span class="pill">ì „ì²´ í•©ê³„: ì°¾ì€ ë‹¨ì„œ <b id="stat-found">0</b> Â· ì „ì²´ ì‚¬ìš© ì‹œê°„ <b id="stat-time">00:00</b></span>
<span class="grow"></span>
<button id="btn-audio" class="ghost" title="ìŒì„± ì•ˆë‚´ ì˜¨/ì˜¤í”„">ğŸ”ˆ ìŒì„± OFF</button>
<button id="btn-dev" class="ghost" title="ê°œë°œì ì¢Œí‘œ ë³´ì¡°ë„êµ¬">ì¢Œí‘œëª¨ë“œ OFF</button>
</header>>


    <!-- ì‹œì‘ í™”ë©´ -->
    <section id="screen-start" class="screen card" role="region" aria-label="ì‹œì‘ í™”ë©´">
      <div class="row">
        <h2 style="margin:0">ë‚œì´ë„ ì„ íƒ</h2>
      </div>
      <div class="row" style="margin-top:6px">
        <span class="pill">ë‚œì´ë„</span>
        <label><input type="radio" name="diff" value="easy" checked> ì‰¬ì›€</label>
        <label><input type="radio" name="diff" value="normal"> ë³´í†µ</label>
        <label><input type="radio" name="diff" value="hard"> ì–´ë ¤ì›€</label>
        <span class="grow"></span>
        <button id="btn-hint-start" class="ghost">ğŸ’¡ íŒíŠ¸(ìˆ˜ë™)</button>
      </div>
      <div class="grid g-3" id="grid" style="margin-top:16px"></div>
    <p class="sub" id="policy-line"><br><br>ì´ í™œë™ì€ <b>ìƒì„±í˜• AI ì´ë¯¸ì§€</b>ì—ì„œ ì‚¬ì‹¤ê³¼ ìƒìƒì„ êµ¬ë¶„í•˜ëŠ” ëŠ¥ë ¥ì„ ê¸°ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. <br> ì´ ì›¹ì•±ì€ <b>ê°œì¸ ì •ë³´ë¥¼ ìˆ˜ì§‘Â·ì €ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤</b>. <br> ê³µìœ  ì‹œì—ëŠ” <b>ì¶œì²˜ í‘œê¸°ì™€ ì‚¬ì‹¤ í™•ì¸</b>ì„ í™•ì¸í•´ì£¼ì„¸ìš”.</p>
    </section>

    <!-- í”Œë ˆì´ í™”ë©´ -->
    <section id="screen-play" class="screen card" role="region" aria-label="í”Œë ˆì´ í™”ë©´" hidden>
      <div class="row">
        <h2 id="play-title" style="margin:0">í”Œë ˆì´</h2>
        <span class="grow"></span>
        <button id="btn-exit" class="ghost">â† ì²˜ìŒ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
      </div>
      <div class="sub" id="play-caption">í™”ë©´ì—ì„œ ë‹¨ì„œ 3ê³³ì„ ì°¾ì•„ í´ë¦­í•˜ì„¸ìš”.</div>
      <div id="stage" class="stage" tabindex="0" aria-label="ë‹¨ì„œë¥¼ ì°¾ëŠ” ì˜ì—­"></div>
      <div class="row" style="margin-top:12px">
        <span class="pill">ì°¾ì€ ë‹¨ì„œ: <b id="found">0</b>/<b id="need">0</b></span>
        <span class="pill">ì†Œìš” ì‹œê°„: <b id="clock">00:00</b></span>
        <span class="grow"></span>
        <button id="btn-hint" class="ghost">ğŸ’¡ íŒíŠ¸ ë³´ê¸°</button>
      </div>
      <div id="result" hidden>
        <div class="divider"></div>
        <h3 class="kudos">ğŸ‰ ì§„ì§œ ëª¨ìŠµ í™•ì¸ ì™„ë£Œ!</h3>
        <p class="sub" id="summary">ì˜¤ëŠ˜ì˜ ë°œê²¬:</p>
        <div id="original" class="stage" style="margin-top:10px"></div>
        <div class="row" style="margin-top:12px">
          <button id="btn-replay" class="btn">ë‹¤ì‹œí•˜ê¸°</button>
          <button id="btn-other" class="ghost">ë‹¤ë¥¸ ì½˜í…ì¸ </button>
        </div>
      </div>
    </section>

    <footer>ì œì‘ì: ê¹€í˜œì¸ Â· ë¬¸ì˜: <a href="mailto:hyein_1221@hanmail.net">hyein_1221@hanmail.net</a></footer>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite" hidden></div>
  <div id="confetti" class="confetti"></div>

<script>
function speak(text){
if(!GLOBAL.audio) return;
try{
const u=new SpeechSynthesisUtterance(text);
u.lang='ko-KR';
u.rate = 1; // ì†ë„ ì‚´ì§ ëŠë¦¬ê²Œ
u.pitch = 1.3; // ìŒë†’ì´ ì¡°ê¸ˆ ë†’ì„
// ì„¤ì¹˜ëœ ëª©ì†Œë¦¬ ì¤‘ í•œêµ­ì–´ ìš°ì„  ì„ íƒ
const voices = speechSynthesis.getVoices();
const ko = voices.find(v => v.lang.startsWith('ko'));
if(ko) u.voice = ko;
speechSynthesis.cancel();
speechSynthesis.speak(u);
}catch(e){}
}
</script>

  <script>
  const CONTENT = {
    easy:[
      { id:'p-e-1', title:'', thumb:'assets/photo/thumbs/e1.jpg', fake:'assets/photo/fake/e1.jpg', orig:'assets/photo/orig/e1.jpg', need:3, hint:'ê·¸ë¦¼ìê°€ ì‚¬ë¼ì§€ê±°ë‚˜ ë°©í–¥ì´ ì´ìƒí•œ ê³³?', spots:[{x:24,y:36,r:6},{x:52,y:62,r:6},{x:78,y:28,r:6}] },
      { id:'p-e-2', title:'', thumb:'assets/photo/thumbs/e2.jpg', fake:'assets/photo/fake/e2.jpg', orig:'assets/photo/orig/e2.jpg', need:3, hint:'ì†ê°€ë½ ê°œìˆ˜ë¥¼ ì„¸ì–´ë³´ì„¸ìš”.', spots:[{x:30,y:48,r:6},{x:61,y:50,r:6},{x:82,y:70,r:6}] },
      { id:'p-e-3', title:'', thumb:'assets/photo/thumbs/e3.jpg', fake:'assets/photo/fake/e3.jpg', orig:'assets/photo/orig/e3.jpg', need:3, hint:'ê²½ê³„ê°€ ë²ˆì§€ê±°ë‚˜ ëŠê¸´ ê³³?', spots:[{x:22,y:24,r:6},{x:50,y:58,r:6},{x:76,y:44,r:6}] }
    ],
    normal:[
      { id:'p-n-1', title:'', thumb:'assets/photo/thumbs/n1.jpg', fake:'assets/photo/fake/n1.jpg', orig:'assets/photo/orig/n1.jpg', need:3, hint:'ì‚¬ëŒ/ì‚¬ë¬¼ì˜ í¬ê¸° ë¹„ìœ¨ì´ ì´ìƒí•œê°€ìš”?', spots:[{x:18,y:36,r:5},{x:47,y:42,r:5},{x:79,y:63,r:5}] },
      { id:'p-n-2', title:'', thumb:'assets/photo/thumbs/n2.jpg', fake:'assets/photo/fake/n2.jpg', orig:'assets/photo/orig/n2.jpg', need:3, hint:'ê±°ìš¸Â·ìœ ë¦¬Â·ë¬¼ ë°˜ì‚¬ë¥¼ ì£¼ì˜ ê¹Šê²Œ.', spots:[{x:26,y:33,r:5},{x:55,y:51,r:5},{x:80,y:22,r:5}] },
      { id:'p-n-3', title:'', thumb:'assets/photo/thumbs/n3.jpg', fake:'assets/photo/fake/n3.jpg', orig:'assets/photo/orig/n3.jpg', need:3, hint:'ê²¹ì³ì§„ ë¶€ë¶„ì˜ ì–´ìƒ‰í•œ ì´ì–´ì§.', spots:[{x:20,y:60,r:5},{x:48,y:35,r:5},{x:75,y:48,r:5}] }
    ],
    hard:[
      { id:'p-h-1', title:'', thumb:'assets/photo/thumbs/h1.jpg', fake:'assets/photo/fake/h1.jpg', orig:'assets/photo/orig/h1.jpg', need:3, hint:'ì†Â·ë°œê°€ë½ ëª¨ì–‘ì˜ ì„¸ë¶€ íŠ¹ì§•.', spots:[{x:24,y:44,r:5},{x:56,y:40,r:5},{x:81,y:64,r:5}] },
      { id:'p-h-2', title:'', thumb:'assets/photo/thumbs/h2.jpg', fake:'assets/photo/fake/h2.jpg', orig:'assets/photo/orig/h2.jpg', need:3, hint:'ê°„íŒÂ·ë¬¸ì ííŠ¸ëŸ¬ì§ í™•ì¸.', spots:[{x:28,y:28,r:5},{x:49,y:53,r:5},{x:70,y:34,r:5}] },
      { id:'p-h-3', title:'', thumb:'assets/photo/thumbs/h3.jpg', fake:'assets/photo/fake/h3.jpg', orig:'assets/photo/orig/h3.jpg', need:3, hint:'ë¹›Â·ê·¸ë¦¼ìÂ·ì¤‘ë ¥ ê·œì¹™ ìœ„ë°˜?', spots:[{x:22,y:22,r:5},{x:52,y:62,r:5},{x:78,y:30,r:5}] }
    ]
  };

  const qs = s=>document.querySelector(s);
  const qsa = s=>[...document.querySelectorAll(s)];
  const $start = qs('#screen-start');
  const $play = qs('#screen-play');
  const $grid = qs('#grid');
  const $stage = qs('#stage');
  const $original = qs('#original');
  const $result = qs('#result');
  const $toast = qs('#toast');
  const $confetti = qs('#confetti');
  const $btnAudio = qs('#btn-audio');
  const $found = qs('#found');
  const $need = qs('#need');
  const $clock = qs('#clock');
  const $statFound = qs('#stat-found');
  const $statTime = qs('#stat-time');
  const $playTitle = qs('#play-title');
  const $playCaption = qs('#play-caption');

  let GLOBAL = { diff:'easy', startedAt:0, timerId:null, sessionFound:0, audio:false, dev:false };
  let ROUND = { item:null, found:new Set(), need:0, lock:false };

  function speak(text){ if(!GLOBAL.audio) return; try{ const u=new SpeechSynthesisUtterance(text); u.lang='ko-KR'; speechSynthesis.cancel(); speechSynthesis.speak(u);}catch(e){} }
  function toast(msg){ $toast.textContent = msg; $toast.hidden=false; clearTimeout(toast._t); toast._t=setTimeout(()=> $toast.hidden=true, 1400); }
  function startTimer(){ GLOBAL.startedAt=Date.now(); clearInterval(GLOBAL.timerId); GLOBAL.timerId=setInterval(()=>{ const s=Math.floor((Date.now()-GLOBAL.startedAt)/1000); const mm=String(Math.floor(s/60)).padStart(2,'0'); const ss=String(s%60).padStart(2,'0'); $clock.textContent=`${mm}:${ss}`; $statTime.textContent=`${mm}:${ss}`; },250); }
  function navPlay(on){ $start.hidden=on; $play.hidden=!on; }

  qsa('input[name="diff"]').forEach(r=> r.onchange = e=>{ GLOBAL.diff = e.target.value; buildGrid(); });
  qs('#btn-hint-start').onclick = ()=> toast('í”Œë ˆì´ ì¤‘ íŒíŠ¸ ë²„íŠ¼ì„ ì´ìš©í•˜ì„¸ìš”.');
  $btnAudio.onclick = ()=>{ GLOBAL.audio = !GLOBAL.audio; $btnAudio.textContent = GLOBAL.audio? 'ğŸ”Š ìŒì„± ON':'ğŸ”ˆ ìŒì„± OFF'; };

  function buildGrid(){
    $grid.innerHTML='';
    const list = CONTENT[GLOBAL.diff];
    list.forEach(item=>{
      const d=document.createElement('div'); d.className='thumb';
      d.innerHTML=`<img alt="thumb" src="${item.thumb}" loading="lazy"><button class="ghost">ì‹œì‘</button>`; // ì´ë¯¸ì§€+ë²„íŠ¼ë§Œ
      d.querySelector('button').onclick=()=> startRound(item);
      $grid.appendChild(d);
    });
  }

  function startRound(item){
    ROUND = { item, found:new Set(), need:item.need||3, lock:false };
    $result.hidden = true;
    $playTitle.textContent = `ğŸ“· ì‚¬ì§„ ë‚˜ë¼ì˜ ìˆ˜ìƒí•œ ë‹¨ì„œ ì°¾ê¸°: ì§„ì§œì™€ ë‹¤ë¥¸ ì ì„ ì°¾ì•„ìš”`;
    $playCaption.textContent = 'ë‹¨ì„œ 3ê³³ì„ ì°¾ì•„ í´ë¦­í•˜ì„¸ìš”. ìƒì„±í˜• AIì˜ â€œìƒìƒ í”ì â€ì— ì§‘ì¤‘!';
    $need.textContent = ROUND.need; $found.textContent = '0';
    $stage.innerHTML='';
    const img = document.createElement('img'); img.src=item.fake; img.alt='í”Œë ˆì´ ì´ë¯¸ì§€'; $stage.appendChild(img);
    $stage.onclick = (e)=> onStageClick(e);
    qs('#btn-hint').onclick = ()=> showHint(item);
    qs('#btn-exit').onclick = ()=> navPlay(false);
    startTimer(); navPlay(true);
  }

  function onStageClick(e){ if(ROUND.lock) return; const rect=$stage.getBoundingClientRect(); const x=((e.clientX-rect.left)/rect.width)*100; const y=((e.clientY-rect.top)/rect.height)*100; if(GLOBAL.dev){ console.log('ì¢Œí‘œ%',{x:+x.toFixed(2),y:+y.toFixed(2)}); }
    const idx=(ROUND.item.spots||[]).findIndex((h,i)=> !ROUND.found.has(i) && dist(x,y,h.x,h.y)<= (h.r||6));
    if(idx>=0){ ROUND.found.add(idx); $found.textContent=ROUND.found.size; GLOBAL.sessionFound++; $statFound.textContent=GLOBAL.sessionFound; ringAt(x,y,true); const msg = randomGood();   // í•œ ë²ˆë§Œ ë½‘ëŠ”ë‹¤
speak(msg);
toast(msg);
 if(ROUND.found.size>=ROUND.need){ onWin(); } }
    else{ ringAt(x,y,false); const msg = randomBad();    // í•œ ë²ˆë§Œ ë½‘ëŠ”ë‹¤
speak(msg);
toast(msg);
 }
  }
  function dist(x1,y1,x2,y2){ const dx=x1-x2, dy=y1-y2; return Math.hypot(dx,dy); }
 function ringAt(px,py,good){
  const m=document.createElement('div');
  m.className='hotspot'+(good?' found':'');
  m.style.left=px+'%';
  m.style.top=py+'%';
  m.style.opacity=1;
  m.innerHTML='<span class="ping"></span>';
  $stage.appendChild(m);
  if (!good) setTimeout(()=> m.remove(), 1500);
}


  // â–¶ íŒíŠ¸: í…ìŠ¤íŠ¸ ëŒ€ì‹  ë„“ì€ í•˜ì´ë¼ì´íŠ¸ + ë©˜íŠ¸
  function showHint(item){
    const msg = 'ì—¬ê¸°ë¥¼ ì¡°ê¸ˆ ë” ì‚´í´ë³¼ê¹Œìš”?';
    toast(msg); speak(msg);
    const i=(item.spots||[]).findIndex((_,i)=> !ROUND.found.has(i));
    if(i>=0){
      const h=item.spots[i];
      const g=document.createElement('div');
      g.className='hotspot';
      g.style.left=h.x+'%';
      g.style.top=h.y+'%';
      g.style.width=g.style.height=(h.r*60)+'px'; // íŒíŠ¸ ì› í¬ê²Œ(ê¸°ì¡´ë³´ë‹¤ ì•½ 5ë°°) 
      g.style.opacity=.75;
      g.style.borderStyle='solid';
      $stage.appendChild(g);
      setTimeout(()=> g.remove(), 1600);
    }
  }

  function onWin(){ ROUND.lock=true; clearInterval(GLOBAL.timerId); confetti(); $result.hidden=false; const elapsed=$clock.textContent; qs('#summary').textContent=`ì˜¤ëŠ˜ì˜ ë°œê²¬: ë‹¨ì„œ ${ROUND.need}ê°œë¥¼ ${elapsed} ë§Œì— ì°¾ì•˜ì–´ìš”!`;
    $original.innerHTML=''; const img=document.createElement('img'); img.src=ROUND.item.orig; img.alt='ì›ë³¸ ì‚¬ì§„'; $original.appendChild(img);
    qs('#btn-replay').onclick=()=> startRound(ROUND.item); qs('#btn-other').onclick=()=> navPlay(false); speak('ì§„ì§œ ëª¨ìŠµ í™•ì¸ ì™„ë£Œ! ë©‹ì§„ íƒì •ì´ì—ìš”.'); }

  function confetti(){ $confetti.innerHTML=''; const n=80; for(let i=0;i<n;i++){ const c=document.createElement('div'); c.className='chip'; c.style.left=Math.random()*100+'%'; c.style.top=(Math.random()*-20)+'px'; c.style.background=`hsl(${Math.random()*360},80%,60%)`; c.style.animationDelay=(Math.random()*0.6)+'s'; c.style.animationDuration=(0.8+Math.random()*0.8)+'s'; $confetti.appendChild(c); } }
  function randomGood(){ return pick(['ì •ë‹µ! ì˜ ì°¾ì•˜ì–´ìš”','ë©‹ì§„ íƒì •ì´ì—ìš”','ì •í™•í•´ìš”! ì¢‹ì€ ê´€ì°°ì´ì—ìš”']); }
  function randomBad(){ return pick(['ê´œì°®ì•„ìš”, ì¡°ê¸ˆ ë” ì‚´í´ë´ìš”','ë‹¤ë¥¸ ê³³ë„ ìˆì„ ìˆ˜ ìˆì–´ìš”','ì²œì²œíˆ ë‹¤ì‹œ ë³¼ê¹Œìš”?']); }
  function pick(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

  (function init(){
    const t0=Date.now(); setInterval(()=>{ const s=Math.floor((Date.now()-t0)/1000); const mm=String(Math.floor(s/60)).padStart(2,'0'); const ss=String(s%60).padStart(2,'0'); $statTime.textContent=`${mm}:${ss}`; },1000);
    buildGrid();
  })();
  </script>
</body>
</html>
